<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset=utf-8>
    <title>Undyne Eternal</title>
    <link rel="stylesheet" href="{{ url_for("static", filename="game/css/game.css") }}">
    
    <script data-main="/static/game/jsmin/config.min"
            src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
            integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
            crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>
    
    <script type="text/javascript">
        window.addEventListener("load", () => {
            //Require PIXI, Howler, and the base (extended) classes first
            require(["pixi", "howler", "assetLoader", "graphicsObject"], () => {
                //Require all other classes
                require([
                    "mathUtility", "audioManager", "fontLoader", "graphicManager", "assetManager",
                    "attackManager", "testAttacks", "attackParser", "arrow", "box", "speechBubble",
                    "greenRectangleManager", "undyne", "player", "hud", "button", "undyneDialogue", "rendererManager",
                    "keyboardHandler", "attackRunner", "gameHandler", "main"
                ], () => {
                    Main.initializeMain();
                    Main.runner.load();
                    Main.runner.startGame(
                        {% if level_data_json | length %}
                            {{ level_data_json | tojson }}
                        {% else %}
                            ""
                        {% endif %},
                        "{{ difficulty }}"
                    );
                });
            });
        });
    </script>
</head>

<body>
    <a id="back-home-feed" href="{{ url_for("feed") }}" target="_self">Back to Home Feed</a>
</body>

</html>
